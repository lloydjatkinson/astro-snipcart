---
import type { Element, SnipcartProduct } from './types';
import { buildAttributes } from './attributes';

export type Props = Element & SnipcartProduct;

const {
    as: Element = 'div',
    id,
    name,
    price,
    url,
    description,
    image,
    categories = [],
    metadata,
    fileGuid,
    quantity,
    minimumQuantity,
    maximumQuantity,
    quantityStep,
    dimensions,
    customFields = [],
    stackable,
    shippable,
    taxable,
    taxes,
    hasTaxesIncluded,
} = Astro.props as Props;

// @ts-expect-error TODO: Investigate fix.
const attributes = buildAttributes({
    id,
    name,
    price,
    url,
    description,
    image,
    categories,
    metadata,
    fileGuid,
    quantity,
    minimumQuantity,
    maximumQuantity,
    quantityStep,
    dimensions,
    customFields,
    stackable,
    shippable,
    taxable,
    taxes,
    hasTaxesIncluded,
});
---

<Element
    class="snipcart-add-item"
    {...attributes}>
    <slot />
</Element>